# HMç¨‹åºå‘˜ç¤¾åŒº - ä¸“ä¸šçš„æŠ€æœ¯äº¤æµå¹³å°

[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![Express.js](https://img.shields.io/badge/Express.js-4.x-blue.svg)](https://expressjs.com/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-orange.svg)](https://www.mysql.com/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

HMç¨‹åºå‘˜ç¤¾åŒºæ˜¯ä¸€ä¸ªåŸºäº Node.js + Express + MySQL æ„å»ºçš„ç°ä»£åŒ–æŠ€æœ¯äº¤æµå¹³å°ï¼Œè‡´åŠ›äºä¸ºå…¨çƒç¨‹åºå‘˜æä¾›ä¼˜è´¨çš„å­¦ä¹ å’Œäº¤æµç¯å¢ƒã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹è‰²

### ğŸ¯ åŠŸèƒ½å®Œæ•´

- **ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ**ï¼šæ³¨å†Œã€ç™»å½•ã€æƒé™æ§åˆ¶ã€èµ„æ–™ç®¡ç†
- **å†…å®¹ç®¡ç†**ï¼šæ–‡ç« ã€é—®ç­”ã€ä»£ç ç‰‡æ®µå‘å¸ƒä¸ç®¡ç†
- **ç¤¾åŒºäº’åŠ¨**ï¼šç‚¹èµã€æ”¶è—ã€è¯„è®ºã€å…³æ³¨åŠŸèƒ½
- **åˆ†ç±»æ ‡ç­¾**ï¼šå®Œå–„çš„åˆ†ç±»å’Œæ ‡ç­¾ç³»ç»Ÿ
- **æœç´¢åŠŸèƒ½**ï¼šå…¨æ–‡æœç´¢å’Œæ™ºèƒ½æ¨è
- **ç®¡ç†åå°**ï¼šç”¨æˆ·ç®¡ç†ã€å†…å®¹å®¡æ ¸ã€æ•°æ®ç»Ÿè®¡

### ğŸ—ï¸ æ¶æ„å…ˆè¿›

- **åˆ†å±‚æ¶æ„**ï¼šæ¸…æ™°çš„ MVC æ¶æ„è®¾è®¡
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šç»„ä»¶åŒ–å¼€å‘ï¼Œæ˜“äºç»´æŠ¤
- **RESTful API**ï¼šæ ‡å‡†åŒ–çš„æ¥å£è®¾è®¡
- **JWTè®¤è¯**ï¼šå®‰å…¨çš„æ— çŠ¶æ€è®¤è¯æœºåˆ¶
- **æ•°æ®åº“ORM**ï¼šä½¿ç”¨ Sequelize è¿›è¡Œæ•°æ®ç®¡ç†

### ğŸ›¡ï¸ å®‰å…¨å¯é 

- **è¯·æ±‚é™æµ**ï¼šé˜²æ­¢æ¶æ„è¯·æ±‚å’ŒDDoSæ”»å‡»
- **æ•°æ®éªŒè¯**ï¼šä¸¥æ ¼çš„è¾“å…¥éªŒè¯å’Œè¿‡æ»¤
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
- **æ—¥å¿—è®°å½•**ï¼šè¯¦ç»†çš„æ“ä½œæ—¥å¿—å’Œç›‘æ§
- **å¯†ç åŠ å¯†**ï¼šä½¿ç”¨ bcrypt åŠ å¯†ç”¨æˆ·å¯†ç 

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

- **è¿è¡Œç¯å¢ƒ**ï¼šNode.js 18+
- **Webæ¡†æ¶**ï¼šExpress.js 4.x
- **æ•°æ®åº“**ï¼šMySQL 8.0
- **ORMæ¡†æ¶**ï¼šSequelize 6.x
- **èº«ä»½è®¤è¯**ï¼šJWT (jsonwebtoken)
- **å¯†ç åŠ å¯†**ï¼šbcryptjs
- **å®æ—¶é€šä¿¡**ï¼šSocket.io
- **é‚®ä»¶æœåŠ¡**ï¼šNodemailer
- **ä»»åŠ¡è°ƒåº¦**ï¼šnode-cron
- **æ—¥å¿—ç³»ç»Ÿ**ï¼šWinston
- **APIæ–‡æ¡£**ï¼šSwagger (OpenAPI 3.0)

### å¼€å‘å·¥å…·

- **ä»£ç é£æ ¼**ï¼šESLint + Prettier
- **APIæµ‹è¯•**ï¼šå†…ç½®æµ‹è¯•ç•Œé¢
- **æ–‡æ¡£ç”Ÿæˆ**ï¼šSwagger UI
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šGit

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### å¿…éœ€ç¯å¢ƒ

- Node.js >= 18.0.0
- MySQL >= 8.0
- npm >= 8.0.0

### æ¨èé…ç½®

- å†…å­˜ï¼š>= 2GB RAM
- ç¡¬ç›˜ï¼š>= 10GB å¯ç”¨ç©ºé—´
- ç½‘ç»œï¼šç¨³å®šçš„äº’è”ç½‘è¿æ¥

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/hm-community/node-service.git
cd node-service
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å‚æ•°ï¼š

```env
# æœåŠ¡å™¨é…ç½®
NODE_ENV=development
PORT=3001

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=hm_community
DB_USER=root
DB_PASSWORD=

# JWTé…ç½®
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# é‚®ä»¶é…ç½®ï¼ˆå¯é€‰ï¼‰
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASS=your-email-password

# å…¶ä»–é…ç½®
FRONTEND_URL=http://localhost:3000
ENABLE_STATIC_SITE=true
```

### 4. æ•°æ®åº“åˆå§‹åŒ–

ç¡®ä¿ MySQL æœåŠ¡è¿è¡Œï¼Œç„¶ååˆ›å»ºæ•°æ®åº“ï¼š

```sql
CREATE DATABASE hm_community CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 5. å¯åŠ¨æœåŠ¡

```bash
npm start
```

æœåŠ¡å¯åŠ¨åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€ï¼š

- **å®˜ç½‘é¦–é¡µ**ï¼šhttp://localhost:3001
- **APIæ–‡æ¡£**ï¼šhttp://localhost:3001/api-docs
- **APIæµ‹è¯•**ï¼šhttp://localhost:3001/api-test.html
- **å¥åº·æ£€æŸ¥**ï¼šhttp://localhost:3001/health

## ğŸ“š API æ–‡æ¡£

### è®¤è¯æ¥å£

| æ–¹æ³• | ç«¯ç‚¹                        | æè¿°         |
| ---- | --------------------------- | ------------ |
| POST | `/api/auth/register`        | ç”¨æˆ·æ³¨å†Œ     |
| POST | `/api/auth/login`           | ç”¨æˆ·ç™»å½•     |
| POST | `/api/auth/logout`          | ç”¨æˆ·ç™»å‡º     |
| GET  | `/api/auth/profile`         | è·å–ç”¨æˆ·ä¿¡æ¯ |
| POST | `/api/auth/refresh-token`   | åˆ·æ–°ä»¤ç‰Œ     |
| POST | `/api/auth/forgot-password` | å¿˜è®°å¯†ç      |
| POST | `/api/auth/reset-password`  | é‡ç½®å¯†ç      |

### å†…å®¹æ¥å£

| æ–¹æ³•   | ç«¯ç‚¹                        | æè¿°          |
| ------ | --------------------------- | ------------- |
| GET    | `/api/content`              | è·å–å†…å®¹åˆ—è¡¨  |
| POST   | `/api/content`              | åˆ›å»ºå†…å®¹      |
| GET    | `/api/content/:id`          | è·å–å†…å®¹è¯¦æƒ…  |
| PUT    | `/api/content/:id`          | æ›´æ–°å†…å®¹      |
| DELETE | `/api/content/:id`          | åˆ é™¤å†…å®¹      |
| POST   | `/api/content/:id/like`     | ç‚¹èµ/å–æ¶ˆç‚¹èµ |
| POST   | `/api/content/:id/favorite` | æ”¶è—/å–æ¶ˆæ”¶è— |

å®Œæ•´çš„APIæ–‡æ¡£è¯·è®¿é—®ï¼š[http://localhost:3001/api-docs](http://localhost:3001/api-docs)

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
node-service/
â”œâ”€â”€ app.js                 # åº”ç”¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json           # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ README.md             # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ QUICK_START.md        # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.js       # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ passport.js       # è®¤è¯é…ç½®
â”œâ”€â”€ controllers/          # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ authController.js # è®¤è¯æ§åˆ¶å™¨
â”‚   â””â”€â”€ contentController.js # å†…å®¹æ§åˆ¶å™¨
â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ index.js         # æ¨¡å‹å…¥å£
â”‚   â”œâ”€â”€ User.js          # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ Content.js       # å†…å®¹æ¨¡å‹
â”‚   â”œâ”€â”€ Category.js      # åˆ†ç±»æ¨¡å‹
â”‚   â””â”€â”€ ...              # å…¶ä»–æ¨¡å‹
â”œâ”€â”€ routes/               # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ auth.js          # è®¤è¯è·¯ç”±
â”‚   â””â”€â”€ content.js       # å†…å®¹è·¯ç”±
â”œâ”€â”€ middlewares/          # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.js          # è®¤è¯ä¸­é—´ä»¶
â”‚   â””â”€â”€ errorHandler.js  # é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”œâ”€â”€ services/             # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ emailService.js  # é‚®ä»¶æœåŠ¡
â”‚   â”œâ”€â”€ cronService.js   # å®šæ—¶ä»»åŠ¡æœåŠ¡
â”‚   â””â”€â”€ socketService.js # WebSocketæœåŠ¡
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ helpers.js       # è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ logger.js        # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ validation.js    # æ•°æ®éªŒè¯
â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ index.html       # å®˜ç½‘é¦–é¡µ
â”‚   â””â”€â”€ api-test.html    # APIæµ‹è¯•é¡µé¢
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â”‚   â””â”€â”€ swagger.json     # APIæ–‡æ¡£é…ç½®
â”œâ”€â”€ templates/            # é‚®ä»¶æ¨¡æ¿
â”‚   â”œâ”€â”€ welcome.html     # æ¬¢è¿é‚®ä»¶
â”‚   â””â”€â”€ ...              # å…¶ä»–æ¨¡æ¿
â”œâ”€â”€ scripts/              # è„šæœ¬æ–‡ä»¶
â”‚   â””â”€â”€ init-database.js # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ logs/                 # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ uploads/              # ä¸Šä¼ æ–‡ä»¶
```

## ğŸ”§ å¼€å‘æŒ‡å—

### å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ¨¡å¼å¯åŠ¨
npm start

# è¿è¡Œæµ‹è¯•
npm test

# ä»£ç æ ¼å¼æ£€æŸ¥
npm run lint

# ä»£ç æ ¼å¼åŒ–
npm run format
```

### æ•°æ®åº“ç®¡ç†

```bash
# åŒæ­¥æ•°æ®åº“ç»“æ„
npm run db:sync

# åˆ›å»ºæ•°æ®åº“è¿ç§»
npm run db:migrate

# å›æ»šæ•°æ®åº“è¿ç§»
npm run db:rollback

# å¡«å……æµ‹è¯•æ•°æ®
npm run db:seed
```

### ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å         | å¿…éœ€ | é»˜è®¤å€¼       | è¯´æ˜         |
| -------------- | ---- | ------------ | ------------ |
| NODE_ENV       | å¦   | development  | è¿è¡Œç¯å¢ƒ     |
| PORT           | å¦   | 3001         | æœåŠ¡ç«¯å£     |
| DB_HOST        | æ˜¯   | localhost    | æ•°æ®åº“ä¸»æœº   |
| DB_PORT        | å¦   | 3306         | æ•°æ®åº“ç«¯å£   |
| DB_NAME        | æ˜¯   | hm_community | æ•°æ®åº“åç§°   |
| DB_USER        | æ˜¯   | root         | æ•°æ®åº“ç”¨æˆ·å |
| DB_PASSWORD    | æ˜¯   |              | æ•°æ®åº“å¯†ç    |
| JWT_SECRET     | æ˜¯   |              | JWTç­¾åå¯†é’¥  |
| JWT_EXPIRES_IN | å¦   | 7d           | JWTè¿‡æœŸæ—¶é—´  |

## ğŸ“Š ç³»ç»Ÿç›‘æ§

### å¥åº·æ£€æŸ¥

è®¿é—® `/health` ç«¯ç‚¹è·å–ç³»ç»ŸçŠ¶æ€ï¼š

```json
{
  "status": "ok",
  "timestamp": "2024-01-01T00:00:00.000Z",
  "uptime": 86400,
  "environment": "development",
  "version": "1.0.0",
  "database": "connected",
  "memory": {
    "used": "50.2 MB",
    "free": "1.94 GB"
  }
}
```

### æ—¥å¿—è®°å½•

ç³»ç»Ÿè‡ªåŠ¨è®°å½•ä»¥ä¸‹æ—¥å¿—ï¼š

- **è®¿é—®æ—¥å¿—**ï¼šHTTPè¯·æ±‚å’Œå“åº”
- **é”™è¯¯æ—¥å¿—**ï¼šåº”ç”¨ç¨‹åºé”™è¯¯å’Œå¼‚å¸¸
- **å®‰å…¨æ—¥å¿—**ï¼šè®¤è¯å¤±è´¥å’Œå¯ç–‘æ“ä½œ
- **æ€§èƒ½æ—¥å¿—**ï¼šæ…¢æŸ¥è¯¢å’Œèµ„æºä½¿ç”¨æƒ…å†µ

æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š`logs/` ç›®å½•

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºDockeré•œåƒ
docker build -t hm-community .

# è¿è¡Œå®¹å™¨
docker run -d -p 3001:3001 --name hm-community hm-community
```

### PM2 éƒ¨ç½²

```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start app.js --name hm-community

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs hm-community
```

### Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

### å¼€å‘æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥
- éµå¾ª JavaScript Standard Style
- ç¼–å†™æ¸…æ™°çš„æ³¨é‡Šå’Œæ–‡æ¡£
- æ·»åŠ é€‚å½“çš„æµ‹è¯•ç”¨ä¾‹

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æŠ€æœ¯æ”¯æŒ

### å¸¸è§é—®é¢˜

æŸ¥çœ‹ [FAQ.md](docs/FAQ.md) è·å–å¸¸è§é—®é¢˜è§£ç­”ã€‚

### é—®é¢˜åé¦ˆ

- **BugæŠ¥å‘Š**ï¼š[GitHub Issues](https://github.com/hm-community/node-service/issues)
- **åŠŸèƒ½è¯·æ±‚**ï¼š[GitHub Discussions](https://github.com/hm-community/node-service/discussions)
- **é‚®ä»¶è”ç³»**ï¼šadmin@hm.com

### ç¤¾åŒºæ”¯æŒ

- **å®˜æ–¹ç½‘ç«™**ï¼šhttps://hm-community.com
- **æŠ€æœ¯æ–‡æ¡£**ï¼šhttps://docs.hm-community.com
- **ç¤¾åŒºè®ºå›**ï¼šhttps://forum.hm-community.com

## ğŸ¯ è·¯çº¿å›¾

### v1.1.0 è®¡åˆ’

- [ ] è¯„è®ºç³»ç»Ÿå®Œå–„
- [ ] å…¨æ–‡æœç´¢åŠŸèƒ½
- [ ] å®æ—¶é€šçŸ¥ç³»ç»Ÿ
- [ ] ç§»åŠ¨ç«¯APIä¼˜åŒ–

### v1.2.0 è®¡åˆ’

- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ä¸»é¢˜å®šåˆ¶åŠŸèƒ½
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] é«˜çº§æƒé™ç®¡ç†

### v2.0.0 è®¡åˆ’

- [ ] å¾®æœåŠ¡æ¶æ„é‡æ„
- [ ] GraphQL APIæ”¯æŒ
- [ ] æœºå™¨å­¦ä¹ æ¨èç³»ç»Ÿ
- [ ] åˆ†å¸ƒå¼éƒ¨ç½²æ”¯æŒ

## ğŸ“ˆ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-01)

- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ‰ å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
- ğŸ“ å†…å®¹ç®¡ç†åŠŸèƒ½
- ğŸ” JWTè®¤è¯æœºåˆ¶
- ğŸ“š å®Œæ•´çš„APIæ–‡æ¡£
- ğŸ§ª åœ¨çº¿APIæµ‹è¯•å·¥å…·

---

<div align="center">

**[å®˜ç½‘](https://hm-community.com)** â€¢
**[æ–‡æ¡£](https://docs.hm-community.com)** â€¢
**[API](http://localhost:3001/api-docs)** â€¢
**[æ¼”ç¤º](http://localhost:3001)**

Made with â¤ï¸ by HM Community Team

</div>
